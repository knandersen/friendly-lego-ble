{"version":3,"sources":["Connector.js","LBLE.js","Message.js","CommandCenter.js","App.js","serviceWorker.js","index.js"],"names":["extensionId","Connector","serviceUuid","characteristicUuid","onBleMessage","Object","classCallCheck","this","runtime","Runtime","registerPeripheralExtension","options","filters","services","optionalServices","ble","BLE","_onConnect","bind","disconnect","console","log","_socket","addListener","onDiscover","e","p","peripheralId","connectPeripheral","startNotifications","payload","_connected","write","BaseUtil","uint8ArrayToBase64","LBLE","number","toString","toHex","padStart","obj","ret","keys","forEach","key","IO","reverseMap","objectFlip","IOEvent","Port","PortFeedback","LedColor","UUID","SERVICE","CHARACTERISTIC","SystemType","WEDO2","DUPLO","SYSTEM","SYSTEM2","DeviceNumber","WEDO","DUPLO_TRAIN","MOVE_HUB","SYSTEM2PORT","SYSTEM2HANDSET","DeviceCapabilities","CENTRAL","PERIPHERAL","LPF2","ACT_AS_REMOTE","MOTOR_WEDO","MOTOR_SYSTEM","BUTTON","LIGHT","VOLTAGE","CURRENT","PIEZO","LED","TILT_EXTERNAL","MOTION_SENSOR","COLOR","MOTOR_EXTERNAL","MOTOR_INTERNAL","TILT","IN_PROGRESS","COMPLETED","DISCARDED","IDLE","BUSY_OR_FULL","A","B","C","D","E","F","Color","NONE","RED","BLUE","GREEN","YELLOW","WHITE","BLACK","ColorIndex","OFF","PINK","VIOLET","LIGHT_BLUE","LIGHT_GREEN","ORANGE","MessageType","HUB_PROPERTIES","HUB_ACTIONS","HUB_ALERTS","HUB_ATTACHED_IO","ERROR","HW_NETWORK_COMMANDS","FW_UPDATE_GO_INTO_BOOTMODE","FW_UPDATE_LOCK_MEMORY","FW_UPDATE_LOCK_STATUS_REQUEST","FW_LOCK_STATUS","PORT_INFO_REQUEST","PORT_MODE_INFO_REQUEST","PORT_INPUT_FORMAT_SETUP_SINGLE","PORT_INPUT_FORMAT_SETUP_COMBINED","PORT_INFORMATION","PORT_MODEINFORMATION","PORT_VALUE","PORT_VALUE_COMBINED","PORT_INPUT_FORMAT","PORT_INPUT_FORMAT_COMBINED","VIRTUAL_PORT_SETUP","OUTPUT","PORT_FEEDBACK","HubProperty","ADVERTISEMENT_NAME","FW_VERSION","HW_VERSION","RSSI","BATTERY_VOLTAGE","BATTERY_TYPE","MANUFACTURER_NAME","RADIO_FW_VERSION","LEGO_WP_VERSION","SYSTEM_TYPE_ID","HW_NETWORK_ID","PRIMARY_MAC","SECONDARY_MAC","HW_NETWORK_FAMILY","HubPropertyOperation","SET","ENABLE_UPDATES","DISABLE_UPDATES","RESET","REQUEST_UPDATE","UPDATE","HubActionType","SWITCH_OFF","DISCONNECT","VCC_PORT_ON","VCC_PORT_OFF","ACTIVATE_BUSY","RESET_BUSY","SWITCH_OFF_FAST","HUB_WILL_SWITCH_OFF","HUB_WILL_DISCONNECT","HUB_WILL_GO_INTO_BOOTMODE","HubAlert","LOW_VOLTAGE","HIGH_CURRENT","LOW_SIGNAL","OVER_POWER","HubAlertOperation","REQUEST_UPDATES","HubAlertPayload","OK","ALERT","ErrorCodes","ACK","NACK","BUFFER_OVERFLOW","TIMEOUT","COMMAND_NOT_RECOGNIZED","INVALID_USE","OVERCURRENT","INTERNAL_ERROR","HardwareNetworkCommandType","HardwareNetworkFamily","HardwareNetworkSubfamily","ModeInformationType","OutputSubCommand","START_POWER","START_POWER_PAIR","SET_ACC_TIME","SET_DEC_TIME","START_SPEED","START_SPEED_PAIR","START_SPEED_FOR_TIME","START_SPEED_FOR_TIME_PAIR","START_SPEED_FOR_DEGREES","START_SPEED_FOR_DEGREES_PAIR","GO_TO_ABS_POSITION","GO_TO_ABS_POSITION_PAIR","PRESET_ENCODER","WRITE_DIRECT_MODE_DATA","OutputExecution","BUFFER_IF_NECESSARY","EXECUTE_IMMEDIATELY","NO_ACTION","COMMAND_FEEDBACK","MotorEndState","FLOAT","HOLD","BRAKE","MotorProfile","DO_NOT_USE","ACCELERATION","DECELERATION","ATTACHED","DETACHED","ATTACHED_VIRTUAL","numberToInt32Array","buffer","ArrayBuffer","dataview","DataView","setInt32","getInt8","sconstructor","Message","phrase","props","react_default","a","createElement","Typography","port","event","io","feedback","hexStrings","Array","prototype","map","call","n","i","toHexString","Card","uuidv1","style","marginBottom","CardContent","Grid","container","item","xs","variant","gutterBottom","alignContent","align","color","moment","timestamp","format","fromDevice","ArrowForwardRounded","fontSize","ArrowBackRounded","ComputerRounded","React","Component","HubID","CommandCenter","_this","possibleConstructorReturn","getPrototypeOf","state","ledIndex","portMotor","ledRgb","r","g","b","background","handleChangeLedIndex","assertThisInitialized","handleChangeLedRgb","setState","target","value","c","rgb","hex","changeLedMode","cmd","unshift","length","ioSend","mode","concat","toConsumableArray","ledOptions","k","MenuItem","pop","portOptions","Container","ExpansionPanel","expanded","ExpansionPanelSummary","expandIcon","ExpandMore_default","aria-controls","id","ExpansionPanelDetails","FormControl","Select","onChange","Button","onClick","changeLedByIndex","lib","disableAlpha","presetColors","onChangeComplete","changeLedByRgb","handleChangePort","Slider","defaultValue","aria-labelledby","valueLabelDisplay","step","marks","min","max","sendMotorCommand","App","messages","onMessage","send","base64ToUint8Array","prevState","Date","now","sortedCards","m","src_Message_0","assign","sort","getTime","reverse","className","CssBaseline","src_CommandCenter_0","onCommand","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c175697c.chunk.js","sourcesContent":["import BLE from 'scratch-vm/src/io/ble';\nimport Runtime from 'scratch-vm/src/engine/runtime';\nimport BaseUtil from 'scratch-vm/src/util/base64-util';\n\nconst extensionId = 'myExtension';\n\nclass Connector {\n\n    constructor(serviceUuid, characteristicUuid, onBleMessage) {\n        this.serviceUuid = serviceUuid;\n        this.characteristicUuid = characteristicUuid;\n        this.onBleMessage = onBleMessage;\n        this.runtime = new Runtime();\n        this.runtime.registerPeripheralExtension(extensionId,this)\n        const options = {\n            filters: [{\n                services: [this.serviceUuid]\n            }],\n            optionalServices: []\n        };\n        this.ble = new BLE(this.runtime, extensionId, options, this._onConnect.bind(this), this.disconnect.bind(this));\n        console.log(this.ble._socket)\n        this.runtime.addListener(\"PERIPHERAL_LIST_UPDATE\",this.onDiscover.bind(this));\n        console.log(\"Set up LEGO Connector\")\n    }\n\n    onDiscover(e) {\n        for (var p in e) {\n            p = e[p]\n            if(this.ble && p.peripheralId) {\n                console.log(\"Discovered LEGO device and will attempt to connect...\")\n                this.ble.connectPeripheral(p.peripheralId);\n            }\n            break;\n        }\n    }\n\n    _onConnect() {\n        if(this.ble) {\n            this.ble.startNotifications(\n                this.serviceUuid,\n                this.characteristicUuid,\n                this.onBleMessage\n            );\n            console.log(\"Connected to LEGO Device.\")\n        } else {\n        console.log(\"Something went wrong while connecting\")\n        }\n    }\n    disconnect() {\n        console.log(\"disconnect\")\n    }\n\n    send(payload) {\n        return this.ble._connected ? this.ble.write(\n            this.serviceUuid,\n            this.characteristicUuid,\n            BaseUtil.uint8ArrayToBase64(payload),'base64', true) : false;\n        \n    }\n}\n\nexport default Connector;","export default class LBLE {\n\n    static toHex(number) {\n        return (number).toString(16)\n    }\n\n    static toHexString(number) {\n        return this.toHex(number).padStart(2,'0')\n    }\n\n    static UUID = {\n        SERVICE: '00001623-1212-efde-1623-785feabcd123',\n        CHARACTERISTIC: '00001624-1212-efde-1623-785feabcd123' \n    }\n\n    static SystemType = {\n        WEDO2: 0x00,\n        DUPLO: 0x01,\n        SYSTEM: 0x02,\n        SYSTEM2: 0x03\n    }\n\n    static DeviceNumber = {\n        WEDO: 0x00,\n        DUPLO_TRAIN: 0x00,\n        MOVE_HUB: 0x00,\n        SYSTEM2PORT: 0x01,\n        SYSTEM2HANDSET: 0x02\n    }\n\n    static DeviceCapabilities = {\n        CENTRAL: 0x01,\n        PERIPHERAL: 0x02,\n        LPF2: 0x04,\n        ACT_AS_REMOTE: 0x08\n    }\n\n    /**\n     * Enum for ids for various LEGO Inputs and Outputs\n     * @readonly\n     * @enum {number}\n     */\n\n    static IO = {\n        MOTOR_WEDO: 0x01,\n        MOTOR_SYSTEM: 0x02,\n        BUTTON: 0x05,\n        LIGHT: 0x08,\n        VOLTAGE: 0x14,\n        CURRENT: 0x15,\n        PIEZO: 0x16,\n        LED: 0x17,\n        TILT_EXTERNAL: 0x22,\n        MOTION_SENSOR: 0x23,\n        COLOR: 0x25,\n        MOTOR_EXTERNAL: 0x26,\n        MOTOR_INTERNAL: 0x27,\n        TILT: 0x28,\n        reverseMap: {}\n    };\n\n    /**\n     * Enum for ids for various output command feedback types on the LEGO.\n     * @readonly\n     * @enum {number}\n     */\n    static PortFeedback = {\n        IN_PROGRESS: 0x01,\n        COMPLETED: 0x02,\n        DISCARDED: 0x04,\n        IDLE: 0x08,\n        BUSY_OR_FULL: 0x10\n    };\n\n    /**\n     * Enum for physical LEGO Ports\n     * @readonly\n     * @enum {number}\n     */\n    static Port = {\n        A: 0,\n        B: 1,\n        C: 2,\n        D: 3,\n        E: 4,\n        F: 5\n    };\n\n    /**\n     * Ids for each color sensor value used by the extension.\n     * @readonly\n     * @enum {string}\n     */\n    static Color = {\n        NONE: 'none',\n        RED: 'red',\n        BLUE: 'blue',\n        GREEN: 'green',\n        YELLOW: 'yellow',\n        WHITE: 'white',\n        BLACK: 'black'\n    };\n\n    /**\n     * Enum for indices for each color sensed by the LEGO vision sensor.\n     * @readonly\n     * @enum {number}\n     */\n    static ColorIndex = {\n        [this.Color.NONE]: 255,\n        [this.Color.RED]: 9,\n        [this.Color.BLUE]: 3,\n        [this.Color.GREEN]: 5,\n        [this.Color.YELLOW]: 7,\n        [this.Color.WHITE]: 10,\n        [this.Color.BLACK]: 0\n    };\n\n    static LedColor = {\n        OFF: 0,\n        PINK: 1,\n        VIOLET: 2,\n        BLUE: 3,\n        LIGHT_BLUE: 4,\n        LIGHT_GREEN: 5,\n        GREEN:6,\n        YELLOW:7,\n        ORANGE:8,\n        RED:9,\n        WHITE:10\n    };\n\n    /**\n     * Enum for Message Types\n     * @readonly\n     * @enum {number}\n     */\n    static MessageType = {\n        HUB_PROPERTIES: 0x01,\n        HUB_ACTIONS: 0x02,\n        HUB_ALERTS: 0x03,\n        HUB_ATTACHED_IO: 0x04,\n        ERROR: 0x05,\n        HW_NETWORK_COMMANDS: 0x08,\n        FW_UPDATE_GO_INTO_BOOTMODE: 0x10,\n        FW_UPDATE_LOCK_MEMORY: 0x11,\n        FW_UPDATE_LOCK_STATUS_REQUEST: 0x12,\n        FW_LOCK_STATUS : 0x13,\n        PORT_INFO_REQUEST : 0x21,\n        PORT_MODE_INFO_REQUEST: 0x22,\n        PORT_INPUT_FORMAT_SETUP_SINGLE: 0x41,\n        PORT_INPUT_FORMAT_SETUP_COMBINED: 0x42,\n        PORT_INFORMATION: 0x43,\n        PORT_MODEINFORMATION: 0x44,\n        PORT_VALUE: 0x45,\n        PORT_VALUE_COMBINED: 0x46,\n        PORT_INPUT_FORMAT: 0x47,\n        PORT_INPUT_FORMAT_COMBINED: 0x48,\n        VIRTUAL_PORT_SETUP : 0x61,\n        OUTPUT: 0x81,\n        PORT_FEEDBACK: 0x82\n    };\n\n    static HubProperty = {\n        ADVERTISEMENT_NAME : 0x01,\n        BUTTON: 0x02,\n        FW_VERSION: 0x03,\n        HW_VERSION: 0x04,\n        RSSI: 0x05,\n        BATTERY_VOLTAGE: 0x06,\n        BATTERY_TYPE: 0x07,\n        MANUFACTURER_NAME: 0x08,\n        RADIO_FW_VERSION: 0x09,\n        LEGO_WP_VERSION: 0x0A,\n        SYSTEM_TYPE_ID: 0x0B,\n        HW_NETWORK_ID: 0x0C,\n        PRIMARY_MAC: 0x0D,\n        SECONDARY_MAC: 0x0E,\n        HW_NETWORK_FAMILY: 0x0F\n    }\n\n    static HubPropertyOperation = {\n        SET: 0x01,\n        ENABLE_UPDATES: 0x02,\n        DISABLE_UPDATES: 0x03,\n        RESET: 0x04,\n        REQUEST_UPDATE: 0x05,\n        UPDATE: 0x06\n    }\n\n    static HubActionType = {\n        SWITCH_OFF: 0x01,\n        DISCONNECT: 0x02,\n        VCC_PORT_ON: 0x03,\n        VCC_PORT_OFF: 0x04,\n        ACTIVATE_BUSY: 0x05,\n        RESET_BUSY: 0x06,\n        SWITCH_OFF_FAST : 0x2F,\n        HUB_WILL_SWITCH_OFF: 0x30,\n        HUB_WILL_DISCONNECT: 0x31,\n        HUB_WILL_GO_INTO_BOOTMODE: 0x32\n    }\n\n    static HubAlert = {\n        LOW_VOLTAGE : 0x01,\n        HIGH_CURRENT: 0x02,\n        LOW_SIGNAL: 0x03,\n        OVER_POWER: 0x04\n    }\n\n    static HubAlertOperation = {\n        ENABLE_UPDATES: 0x01,\n        DISABLE_UPDATES: 0x02,\n        REQUEST_UPDATES: 0x03,\n        UPDATE: 0x04\n    }\n\n    static HubAlertPayload = {\n        OK: 0x00,\n        ALERT: 0xFF\n    }\n\n    static ErrorCodes = {\n        ACK: 0x01,\n        NACK: 0x02,\n        BUFFER_OVERFLOW: 0x03,\n        TIMEOUT: 0x04,\n        COMMAND_NOT_RECOGNIZED : 0x05,\n        INVALID_USE: 0x06,\n        OVERCURRENT: 0x07,\n        INTERNAL_ERROR: 0x08\n    }\n\n    static HardwareNetworkCommandType = {}\n\n    static HardwareNetworkFamily = {}\n\n    static HardwareNetworkSubfamily = {}\n\n    static ModeInformationType = {\n    }\n\n    /**\n     * TBD: function for converting version numbers to something friendly https://lego.github.io/lego-ble-wireless-protocol-docs/index.html#ver-no\n     */\n\n    /**\n     * Enum for Motor Subcommands (for 0x81)\n     * @readonly\n     * @enum {number}\n     */\n    static OutputSubCommand = {\n        START_POWER: 0x01,\n        START_POWER_PAIR: 0x02,\n        SET_ACC_TIME: 0x05,\n        SET_DEC_TIME: 0x06,\n        START_SPEED: 0x07,\n        START_SPEED_PAIR: 0x08,\n        START_SPEED_FOR_TIME: 0x09,\n        START_SPEED_FOR_TIME_PAIR: 0x0A,\n        START_SPEED_FOR_DEGREES: 0x0B,\n        START_SPEED_FOR_DEGREES_PAIR: 0x0C,\n        GO_TO_ABS_POSITION: 0x0D,\n        GO_TO_ABS_POSITION_PAIR: 0x0E,\n        PRESET_ENCODER: 0x14,\n        WRITE_DIRECT_MODE_DATA: 0x51\n    };\n\n    /**\n     * Enum for Startup/Completion information for an output command.\n     * Startup and completion bytes must be OR'ed to be combined to a single byte.\n     * @readonly\n     * @enum {number}\n     */\n    static OutputExecution = {\n        // Startup information\n        BUFFER_IF_NECESSARY: 0x00,\n        EXECUTE_IMMEDIATELY: 0x10,\n        // Completion information\n        NO_ACTION: 0x00,\n        COMMAND_FEEDBACK: 0x01\n    };\n\n    /**\n     * Enum for LEGO Motor end states\n     * @readonly\n     * @enum {number}\n     */\n    static MotorEndState = {\n        FLOAT: 0,\n        HOLD: 126,\n        BRAKE: 127\n    };\n\n    /**\n     * Enum for LEGO Motor acceleration/deceleration profiles\n     * @readyonly\n     * @enum {number}\n     */\n    static MotorProfile = {\n        DO_NOT_USE: 0x00,\n        ACCELERATION: 0x01,\n        DECELERATION: 0x02\n    };\n\n    /**\n     * Enum for when LEGO IO's are attached/detached\n     * @readonly\n     * @enum {number}\n     */\n    static IOEvent = {\n        ATTACHED: 0x01,\n        DETACHED: 0x00,\n        ATTACHED_VIRTUAL: 0x02\n    }\n    \n    static numberToInt32Array = function (number) {\n        const buffer = new ArrayBuffer(4);\n        const dataview = new DataView(buffer);\n        dataview.setInt32(0, number);\n        return [\n            dataview.getInt8(3),\n            dataview.getInt8(2),\n            dataview.getInt8(1),\n            dataview.getInt8(0)\n        ];\n    };\n\n    static objectFlip(obj) {\n        const ret = {};\n        Object.keys(obj).forEach((key) => {\n          ret[obj[key]] = key;\n        });\n        return ret;\n      }\n\n    \n    static sconstructor() {\n        this.IO.reverseMap = this.objectFlip(this.IO)\n        this.IOEvent.reverseMap = this.objectFlip(this.IOEvent)\n        this.Port.reverseMap = this.objectFlip(this.Port)\n        this.PortFeedback.reverseMap = this.objectFlip(this.PortFeedback)\n        this.LedColor.reverseMap = this.objectFlip(this.LedColor)\n    }\n}\nLBLE.sconstructor()","import React from 'react';\nimport './Message.css';\nimport LBLE from './LBLE';\nimport moment from 'moment';\nimport uuidv1 from 'uuid/v1';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { ComputerRounded , ArrowBackRounded, ArrowForwardRounded } from '@material-ui/icons';\n\nclass Message extends React.Component {\n\n  render() {\n    var phrase = 'Message'\n    switch(this.props.payload[2]) {\n        case LBLE.MessageType.HUB_PROPERTIES:\n        case LBLE.MessageType.HUB_ALERTS:\n            phrase = <Typography>Hub</Typography>\n            break;\n        case LBLE.MessageType.HUB_ATTACHED_IO: {\n            let port = this.props.payload[3],\n                  event = this.props.payload[4],\n                  io = this.props.payload[5];\n            phrase = <Typography><b>{LBLE.IO.reverseMap[io]} {LBLE.IOEvent.reverseMap[event]}</b> on port <b>{LBLE.Port.reverseMap[port] ? LBLE.Port.reverseMap[port]:port}</b></Typography>;\n            break;\n        }\n        case LBLE.MessageType.PORT_INFORMATION:\n            phrase = <Typography>Port</Typography>\n            break;\n        case LBLE.MessageType.PORT_FEEDBACK:\n            let port = this.props.payload[3],\n            feedback = this.props.payload[4];\n            phrase = <Typography>Command <b>{feedback}</b> on port <b>{LBLE.Port.reverseMap[port] ? LBLE.Port.reverseMap[port]:port}</b></Typography>;\n            break;\n        case LBLE.MessageType.ERROR:\n            phrase = <Typography>Error</Typography>\n            break;\n        default:\n          console.log(this.props.payload)\n    }\n\n    const hexStrings = Array.prototype.map.call(this.props.payload, function(n,i) {\n        return '0x' + LBLE.toHexString(n) + ' '\n    })\n\n    return (\n      <Card key={uuidv1()} style={{marginBottom:12}}>\n        <CardContent>\n            <Grid container>\n                <Grid item xs={12}>\n                    <Typography variant=\"body2\" gutterBottom>\n                        {phrase}\n                    </Typography>\n                </Grid>\n                <Grid item xs={10}>\n                    <Typography variant=\"caption\">\n                        {hexStrings}\n                    </Typography>\n                </Grid>\n                <Grid item xs={2} alignContent={\"flex-end\"}>\n                    <Typography variant=\"caption\" align={'right'} color={'disabled'} gutterBottom>\n                        {moment(this.props.timestamp).format('HH:mm:ss.SSS')}\n                    </Typography>\n                </Grid>\n                <Grid item xs={12}>\n                { this.props.fromDevice ? <ArrowForwardRounded color={\"primary\"} fontSize={\"small\"} />:<ArrowBackRounded color={\"secondary\"} fontSize={\"small\"} /> } <ComputerRounded fontSize={\"small\"} />\n                </Grid>\n            </Grid>\n        </CardContent>\n      </Card>\n    );\n  }\n}\n\nexport default Message;\n","import React from 'react';\nimport './CommandCenter.css';\nimport LBLE from './LBLE';\nimport { SketchPicker } from 'react-color';\nimport Container from '@material-ui/core/Container';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Button from '@material-ui/core/Button';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Card from '@material-ui/core/Card';\nimport Slider from '@material-ui/core/Slider';\nimport Grid from '@material-ui/core/Grid';\n\nconst HubID = 0x00;\n\nclass CommandCenter extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            ledIndex: 0,\n            portMotor:0,\n            ledRgb: {r:0,g:0,b:0},\n            background:'#fff'\n        }\n\n        this.handleChangeLedIndex = this.handleChangeLedIndex.bind(this);\n        this.handleChangeLedRgb = this.handleChangeLedRgb.bind(this)\n    }\n\n    handleChangeLedIndex(e) {\n        this.setState({ledIndex: e.target.value})\n    }\n\n    handleChangeLedRgb(c) {\n        this.setState({\n            ledRgb: c.rgb, \n            background: c.hex\n        });\n    }\n\n    changeLedByIndex(payload) {\n        this.changeLedMode(0)\n        const cmd = [HubID, \n            LBLE.MessageType.OUTPUT, \n            50, \n            LBLE.OutputExecution.EXECUTE_IMMEDIATELY ^ LBLE.OutputExecution.COMMAND_FEEDBACK,\n            LBLE.OutputSubCommand.WRITE_DIRECT_MODE_DATA,\n            0,\n            this.state.ledIndex\n        ];\n        cmd.unshift(cmd.length);\n        this.props.ioSend(cmd);\n    }\n\n    changeLedByRgb(payload) {\n        this.changeLedMode(1)\n        const cmd = [HubID, \n            LBLE.MessageType.OUTPUT, \n            50, \n            LBLE.OutputExecution.EXECUTE_IMMEDIATELY ^ LBLE.OutputExecution.COMMAND_FEEDBACK,\n            LBLE.OutputSubCommand.WRITE_DIRECT_MODE_DATA,\n            1,\n            this.state.ledRgb.r,\n            this.state.ledRgb.g,\n            this.state.ledRgb.b,\n        ];\n        cmd.unshift(cmd.length);\n        this.props.ioSend(cmd);\n    }\n\n    changeLedMode(mode) {\n        const cmd = [HubID, \n            LBLE.MessageType.PORT_INPUT_FORMAT_SETUP_SINGLE, \n            50,\n            mode,\n            ...LBLE.numberToInt32Array(1),\n            1\n        ];\n        cmd.unshift(cmd.length);\n        this.props.ioSend(cmd);\n    }\n\n    sendMotorCommand() {\n\n    }\n    \n\n  render() {\n    const ledOptions = Object.keys(LBLE.LedColor).map((k,i) => {\n        return <MenuItem value={i} key={i}>({i}) {k}</MenuItem>;\n    });\n    ledOptions.pop(); // Remove reverseMap\n\n    const portOptions = Object.keys(LBLE.Port).map((k,i) => {\n        return <MenuItem value={i} key={i}>({i}) {k}</MenuItem>;\n    });\n    portOptions.pop(); // Remove reverseMap\n\n    return (\n        <Container>\n        <ExpansionPanel expanded>\n            <ExpansionPanelSummary \n                expandIcon={<ExpandMoreIcon />} aria-controls=\"panel1a-content\" id=\"panel1a-header\">\n                <Typography variant=\"h5\">LED</Typography>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n                <FormControl>\n                    <Select onChange={this.handleChangeLedIndex} value={this.state.ledIndex}>\n                        {ledOptions}\n                    </Select><Button variant=\"contained\" color=\"secondary\" onClick={this.changeLedByIndex.bind(this)}>set LED by index</Button>\n                    <br /><br />\n                    <SketchPicker disableAlpha={true} presetColors={[]} color={this.state.background} onChangeComplete={this.handleChangeLedRgb} />\n                    <Button variant=\"contained\" color=\"secondary\" onClick={this.changeLedByRgb.bind(this)}>set LED by RGB</Button>\n                </FormControl>\n            </ExpansionPanelDetails>\n        </ExpansionPanel>\n        <ExpansionPanel expanded>\n            <ExpansionPanelSummary \n                expandIcon={<ExpandMoreIcon />} aria-controls=\"panel2a-content\" id=\"panel2a-header\">  \n                <Typography variant=\"h5\">Motor</Typography>\n            </ExpansionPanelSummary>   \n            <ExpansionPanelDetails>\n                <Grid container>\n                    <Grid item xs={4}>\n                        Port:\n                    </Grid>\n                    <Grid item xs={8}>\n                        <Select onChange={this.handleChangePort} value={this.state.portMotor}>{portOptions}</Select>\n                    </Grid>\n                    <Grid item xs={4}>Command type:</Grid>\n                    <Grid item xs={8}></Grid>\n                    <Grid item xs={4}>Speed:</Grid>\n                    <Grid item xs={8}><Slider defaultValue={50}\n                                    aria-labelledby=\"discrete-slider\"\n                                    valueLabelDisplay=\"auto\"\n                                    step={1}\n                                    marks\n                                    min={0}\n                                    max={100}/></Grid>\n                    <Grid item xs={4}>MaxPower:</Grid>\n                    <Grid item xs={8}><Slider defaultValue={100}\n                                    aria-labelledby=\"discrete-slider\"\n                                    valueLabelDisplay=\"auto\"\n                                    step={1}\n                                    marks\n                                    min={0}\n                                    max={100}\n                                    color=\"secondary\"/>\n                    </Grid>\n                    <Grid item xs={12}><Button variant=\"contained\" color=\"secondary\" onClick={this.sendMotorCommand.bind(this)}>Start motor with speed</Button></Grid>\n\n                </Grid>\n            </ExpansionPanelDetails>\n        </ExpansionPanel>\n        </Container>\n    );\n  }\n}\n\nexport default CommandCenter;\n","import React from 'react';\nimport './App.css';\nimport Connector from './Connector';\nimport BaseUtil from 'scratch-vm/src/util/base64-util';\nimport LBLE from './LBLE';\nimport Message from './Message';\nimport CommandCenter from './CommandCenter';\nimport uuidv1 from 'uuid/v1';\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Typography from '@material-ui/core/Typography'\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      messages: []\n    }\n    this.onMessage = this.onMessage.bind(this);\n    this.send = this.send.bind(this);\n    // This will set up a Scratch VM runtime with BLE, start scanning for the given service and automatically connect if any is found. Once connected, it will subscribe to the given characteristic and use to send commands to.\n    this.c = new Connector(LBLE.UUID.SERVICE, LBLE.UUID.CHARACTERISTIC, this.onMessage);\n  }\n\n  send(payload) {\n    this.c.send(payload);\n  }\n\n  onMessage(e) {\n    var b = BaseUtil.base64ToUint8Array(e)\n    this.setState((prevState) => ({\n        messages: [...prevState.messages, {\"timestamp\":Date.now(),\"payload\":b,fromDevice:true}]\n    }));\n  }\n\n  onCommand(p) {\n    this.c.send(p);\n    this.setState((prevState) => ({\n      messages: [...prevState.messages, {\"timestamp\":Date.now(),\"payload\":p,fromDevice:false}]\n  }));\n  }\n\n  render() {\n    const cards = this.state.messages.map(m => {\n            return <Message key={uuidv1()} {...m}></Message>;\n    });\n    const sortedCards = cards.sort((a,b) => {\n      return new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime()\n    }).reverse();\n\n    return (\n      <div className=\"App\">\n        <CssBaseline />\n        <div className=\"Cards\">\n          <Typography variant=\"h5\" gutterBottom>Messages</Typography>\n          {sortedCards}\n          {<Message timestamp={Date.now()} payload={[8, 0, 129, 50, 17, 81, 0, 2]} fromDevice={false}></Message>}\n          {<Message timestamp={Date.now()} payload={[9, 0, 129, 50, 17, 81, 0, 2, 50, 17, 81, 0, 4]} fromDevice={true}></Message>}\n        </div>\n        <CommandCenter ioSend={this.onCommand.bind(this)} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}