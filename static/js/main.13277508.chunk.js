(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){e.exports=a(514)},209:function(e,t,a){},210:function(e,t,a){},227:function(e,t){},292:function(e,t,a){},295:function(e,t,a){},514:function(e,t,a){"use strict";a.r(t);var n,r=a(1),o=a.n(r),s=a(9),E=a.n(s),i=(a(209),a(63)),c=a(24),T=a(25),O=a(50),l=a(49),_=a(33),d=a(51),u=(a(210),a(197)),R=a.n(u),h=a(198),I=a.n(h),A=a(93),C=a.n(A),m="myExtension",p=function(){function e(t,a,n){Object(c.a)(this,e),this.serviceUuid=t,this.characteristicUuid=a,this.onBleMessage=n,this.runtime=new I.a,this.runtime.registerPeripheralExtension(m,this);var r={filters:[{services:[this.serviceUuid]}],optionalServices:[]};this.ble=new R.a(this.runtime,m,r,this._onConnect.bind(this),this.disconnect.bind(this)),this.runtime.addListener("PERIPHERAL_LIST_UPDATE",this.onDiscover.bind(this)),console.log("Set up LEGO Connector")}return Object(T.a)(e,[{key:"onDiscover",value:function(e){for(var t in e){t=e[t],this.ble&&t.peripheralId&&this.ble.connectPeripheral(t.peripheralId);break}}},{key:"_onConnect",value:function(){this.ble&&this.ble.startNotifications(this.serviceUuid,this.characteristicUuid,this.onBleMessage)}},{key:"disconnect",value:function(){console.log("disconnect")}},{key:"send",value:function(e){return!!this.ble._connected&&this.ble.write(this.serviceUuid,this.characteristicUuid,C.a.uint8ArrayToBase64(e),"base64",!0)}}]),e}(),S=a(34),b=function(){function e(){Object(c.a)(this,e)}return Object(T.a)(e,null,[{key:"toHex",value:function(e){return e.toString(16)}},{key:"toHexString",value:function(e){return this.toHex(e).padStart(2,"0")}},{key:"objectFlip",value:function(e){var t={};return Object.keys(e).forEach(function(a){t[e[a]]=a}),t}},{key:"sconstructor",value:function(){this.IO.reverseMap=this.objectFlip(this.IO),this.IOEvent.reverseMap=this.objectFlip(this.IOEvent),this.Port.reverseMap=this.objectFlip(this.Port),this.PortFeedback.reverseMap=this.objectFlip(this.PortFeedback),this.LedColor.reverseMap=this.objectFlip(this.LedColor)}}]),e}();b.UUID={SERVICE:"00001623-1212-efde-1623-785feabcd123",CHARACTERISTIC:"00001624-1212-efde-1623-785feabcd123"},b.SystemType={WEDO2:0,DUPLO:1,SYSTEM:2,SYSTEM2:3},b.DeviceNumber={WEDO:0,DUPLO_TRAIN:0,MOVE_HUB:0,SYSTEM2PORT:1,SYSTEM2HANDSET:2},b.DeviceCapabilities={CENTRAL:1,PERIPHERAL:2,LPF2:4,ACT_AS_REMOTE:8},b.IO={MOTOR_WEDO:1,MOTOR_SYSTEM:2,BUTTON:5,LIGHT:8,VOLTAGE:20,CURRENT:21,PIEZO:22,LED:23,TILT_EXTERNAL:34,MOTION_SENSOR:35,COLOR:37,MOTOR_EXTERNAL:38,MOTOR_INTERNAL:39,TILT:40,reverseMap:{}},b.PortFeedback={IN_PROGRESS:1,COMPLETED:2,DISCARDED:4,IDLE:8,BUSY_OR_FULL:16},b.Port={A:0,B:1,C:2,D:3,E:4,F:5},b.Color={NONE:"none",RED:"red",BLUE:"blue",GREEN:"green",YELLOW:"yellow",WHITE:"white",BLACK:"black"},b.ColorIndex=(n={},Object(S.a)(n,b.Color.NONE,255),Object(S.a)(n,b.Color.RED,9),Object(S.a)(n,b.Color.BLUE,3),Object(S.a)(n,b.Color.GREEN,5),Object(S.a)(n,b.Color.YELLOW,7),Object(S.a)(n,b.Color.WHITE,10),Object(S.a)(n,b.Color.BLACK,0),n),b.LedColor={OFF:0,PINK:1,VIOLET:2,BLUE:3,LIGHT_BLUE:4,LIGHT_GREEN:5,GREEN:6,YELLOW:7,ORANGE:8,RED:9,WHITE:10},b.MessageType={HUB_PROPERTIES:1,HUB_ACTIONS:2,HUB_ALERTS:3,HUB_ATTACHED_IO:4,ERROR:5,HW_NETWORK_COMMANDS:8,FW_UPDATE_GO_INTO_BOOTMODE:16,FW_UPDATE_LOCK_MEMORY:17,FW_UPDATE_LOCK_STATUS_REQUEST:18,FW_LOCK_STATUS:19,PORT_INFO_REQUEST:33,PORT_MODE_INFO_REQUEST:34,PORT_INPUT_FORMAT_SETUP_SINGLE:65,PORT_INPUT_FORMAT_SETUP_COMBINED:66,PORT_INFORMATION:67,PORT_MODEINFORMATION:68,PORT_VALUE:69,PORT_VALUE_COMBINED:70,PORT_INPUT_FORMAT:71,PORT_INPUT_FORMAT_COMBINED:72,VIRTUAL_PORT_SETUP:97,OUTPUT:129,PORT_FEEDBACK:130},b.HubProperty={ADVERTISEMENT_NAME:1,BUTTON:2,FW_VERSION:3,HW_VERSION:4,RSSI:5,BATTERY_VOLTAGE:6,BATTERY_TYPE:7,MANUFACTURER_NAME:8,RADIO_FW_VERSION:9,LEGO_WP_VERSION:10,SYSTEM_TYPE_ID:11,HW_NETWORK_ID:12,PRIMARY_MAC:13,SECONDARY_MAC:14,HW_NETWORK_FAMILY:15},b.HubPropertyOperation={SET:1,ENABLE_UPDATES:2,DISABLE_UPDATES:3,RESET:4,REQUEST_UPDATE:5,UPDATE:6},b.HubActionType={SWITCH_OFF:1,DISCONNECT:2,VCC_PORT_ON:3,VCC_PORT_OFF:4,ACTIVATE_BUSY:5,RESET_BUSY:6,SWITCH_OFF_FAST:47,HUB_WILL_SWITCH_OFF:48,HUB_WILL_DISCONNECT:49,HUB_WILL_GO_INTO_BOOTMODE:50},b.HubAlert={LOW_VOLTAGE:1,HIGH_CURRENT:2,LOW_SIGNAL:3,OVER_POWER:4},b.HubAlertOperation={ENABLE_UPDATES:1,DISABLE_UPDATES:2,REQUEST_UPDATES:3,UPDATE:4},b.HubAlertPayload={OK:0,ALERT:255},b.ErrorCodes={ACK:1,NACK:2,BUFFER_OVERFLOW:3,TIMEOUT:4,COMMAND_NOT_RECOGNIZED:5,INVALID_USE:6,OVERCURRENT:7,INTERNAL_ERROR:8},b.HardwareNetworkCommandType={},b.HardwareNetworkFamily={},b.HardwareNetworkSubfamily={},b.ModeInformationType={},b.OutputSubCommand={START_POWER:1,START_POWER_PAIR:2,SET_ACC_TIME:5,SET_DEC_TIME:6,START_SPEED:7,START_SPEED_PAIR:8,START_SPEED_FOR_TIME:9,START_SPEED_FOR_TIME_PAIR:10,START_SPEED_FOR_DEGREES:11,START_SPEED_FOR_DEGREES_PAIR:12,GO_TO_ABS_POSITION:13,GO_TO_ABS_POSITION_PAIR:14,PRESET_ENCODER:20,WRITE_DIRECT_MODE_DATA:81},b.OutputExecution={BUFFER_IF_NECESSARY:0,EXECUTE_IMMEDIATELY:16,NO_ACTION:0,COMMAND_FEEDBACK:1},b.MotorEndState={FLOAT:0,HOLD:126,BRAKE:127},b.MotorProfile={DO_NOT_USE:0,ACCELERATION:1,DECELERATION:2},b.IOEvent={ATTACHED:1,DETACHED:0,ATTACHED_VIRTUAL:2},b.numberToInt32Array=function(e){var t=new ArrayBuffer(4),a=new DataView(t);return a.setInt32(0,e),[a.getInt8(3),a.getInt8(2),a.getInt8(1),a.getInt8(0)]},b.sconstructor();a(292);var D=a(199),M=a.n(D),N=a(94),P=a.n(N),L=function(e){function t(){return Object(c.a)(this,t),Object(O.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e="?";switch(this.props.payload[2]){case b.MessageType.HUB_PROPERTIES:case b.MessageType.HUB_ALERTS:e="Hub";break;case b.MessageType.HUB_ATTACHED_IO:var t=this.props.payload[3],a=this.props.payload[4],n=this.props.payload[5];e="".concat(b.IO.reverseMap[n]," ").concat(b.IOEvent.reverseMap[a]," on port ").concat(b.Port.reverseMap[t]?b.Port.reverseMap[t]:t);break;case b.MessageType.PORT_INFORMATION:e="Port";break;case b.MessageType.PORT_FEEDBACK:var r=this.props.payload[3],s=this.props.payload[4];e="Command ".concat(s," on port ").concat(b.Port.reverseMap[r]?b.Port.reverseMap[r]:r);break;case b.MessageType.ERROR:e="Error";break;default:console.log(this.props.payload)}var E=Array.prototype.map.call(this.props.payload,function(e){return"0x"+b.toHexString(e)+" "});return o.a.createElement("div",{key:P()(),className:"Card"},o.a.createElement("div",{className:"Card-phrase"},e),o.a.createElement("div",{className:"Card-footer"},o.a.createElement("div",{className:"Card-code"},E),o.a.createElement("div",{className:"Card-timestamp"},M()(this.props.timestamp).format("HH:mm:ss.SSS"))))}}]),t}(o.a.Component),v=(a(295),a(200)),U=a(134),g=(a(513),0),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(O.a)(this,Object(l.a)(t).call(this,e))).state={ledIndex:0,ledRgb:{r:0,g:0,b:0},background:"#fff"},a.handleChangeLedIndex=a.handleChangeLedIndex.bind(Object(_.a)(a)),a.handleChangeLedRgb=a.handleChangeLedRgb.bind(Object(_.a)(a)),a}return Object(d.a)(t,e),Object(T.a)(t,[{key:"handleChangeLedIndex",value:function(e){this.setState({ledIndex:e.target.value})}},{key:"handleChangeLedRgb",value:function(e){this.setState({ledRgb:e.rgb,background:e.hex})}},{key:"changeLedByIndex",value:function(e){this.changeLedMode(0);var t=[g,b.MessageType.OUTPUT,50,b.OutputExecution.EXECUTE_IMMEDIATELY^b.OutputExecution.COMMAND_FEEDBACK,b.OutputSubCommand.WRITE_DIRECT_MODE_DATA,0,this.state.ledIndex];t.unshift(t.length),this.props.ioSend(t)}},{key:"changeLedByRgb",value:function(e){this.changeLedMode(1);var t=[g,b.MessageType.OUTPUT,50,b.OutputExecution.EXECUTE_IMMEDIATELY^b.OutputExecution.COMMAND_FEEDBACK,b.OutputSubCommand.WRITE_DIRECT_MODE_DATA,1,this.state.ledRgb.r,this.state.ledRgb.g,this.state.ledRgb.b];t.unshift(t.length),this.props.ioSend(t)}},{key:"changeLedMode",value:function(e){var t=[g,b.MessageType.PORT_INPUT_FORMAT_SETUP_SINGLE,50,e].concat(Object(i.a)(b.numberToInt32Array(1)),[1]);t.unshift(t.length),this.props.ioSend(t)}},{key:"sendMotorCommand",value:function(){}},{key:"render",value:function(){var e=Object.keys(b.LedColor).map(function(e,t){return o.a.createElement("option",{value:t,key:t},"(",t,") ",e)});e.pop();var t=Object.keys(b.Port).map(function(e,t){return o.a.createElement("option",{value:t,key:t},"(",t,") ",e)});return t.pop(),o.a.createElement("div",{className:"CommandCenterContainer"},o.a.createElement("div",{className:"CommandCenter-card"},o.a.createElement("div",{className:"CommandCenter-header"},"LED"),o.a.createElement("select",{onChange:this.handleChangeLedIndex,value:this.state.ledIndex},e),o.a.createElement("button",{onClick:this.changeLedByIndex.bind(this)},"set LED by index"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(v.SketchPicker,{disableAlpha:!0,presetColors:[],color:this.state.background,onChangeComplete:this.handleChangeLedRgb}),o.a.createElement("button",{onClick:this.changeLedByRgb.bind(this)},"set LED by RGB")),o.a.createElement("div",{className:"CommandCenter-card"},o.a.createElement("div",{className:"CommandCenter-header"},"Motor (WIP)"),"Port: ",o.a.createElement("select",{onChange:this.handleChangePort,value:this.state.portMotor},t),o.a.createElement("br",null),"Command type:",o.a.createElement("br",null),"Speed: ",o.a.createElement("div",null,o.a.createElement(U.a,{min:0,max:100,defaultValue:50}))," ",o.a.createElement("br",null),"MaxPower: ",o.a.createElement("div",null,o.a.createElement(U.a,{min:0,max:100,defaultValue:100}))," ",o.a.createElement("br",null),"MaxPower: ",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.sendMotorCommand.bind(this)},"Send motor command")))}}]),t}(o.a.Component),f=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(O.a)(this,Object(l.a)(t).call(this))).state={messages:[]},e.onMessage=e.onMessage.bind(Object(_.a)(e)),e.send=e.send.bind(Object(_.a)(e)),e.c=new p(b.UUID.SERVICE,b.UUID.CHARACTERISTIC,e.onMessage),e}return Object(d.a)(t,e),Object(T.a)(t,[{key:"send",value:function(e){this.c.send(e)}},{key:"onMessage",value:function(e){var t=C.a.base64ToUint8Array(e);this.setState(function(e){return{messages:[].concat(Object(i.a)(e.messages),[{timestamp:Date.now(),payload:t,fromDevice:!0}])}})}},{key:"onCommand",value:function(e){this.c.send(e),this.setState(function(t){return{messages:[].concat(Object(i.a)(t.messages),[{timestamp:Date.now(),payload:e,fromDevice:!1}])}})}},{key:"render",value:function(){var e=this.state.messages.map(function(e){return o.a.createElement(L,Object.assign({key:P()()},e))}).sort(function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()}).reverse();return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"Cards"},e),o.a.createElement(y,{ioSend:this.onCommand.bind(this)}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));E.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[204,1,2]]]);
//# sourceMappingURL=main.13277508.chunk.js.map