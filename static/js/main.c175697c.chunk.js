(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t,a){e.exports=a(451)},190:function(e,t,a){},191:function(e,t,a){},212:function(e,t){},280:function(e,t,a){},287:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(10),E=a.n(i),s=(a(190),a(18)),c=a(25),l=a(17),T=a(48),O=a(49),u=a(20),d=a(52),_=(a(191),a(176)),m=a.n(_),R=a(177),h=a.n(R),p=a(88),I=a.n(p),A="myExtension",S=function(){function e(t,a,n){Object(c.a)(this,e),this.serviceUuid=t,this.characteristicUuid=a,this.onBleMessage=n,this.runtime=new h.a,this.runtime.registerPeripheralExtension(A,this);var r={filters:[{services:[this.serviceUuid]}],optionalServices:[]};this.ble=new m.a(this.runtime,A,r,this._onConnect.bind(this),this.disconnect.bind(this)),console.log(this.ble._socket),this.runtime.addListener("PERIPHERAL_LIST_UPDATE",this.onDiscover.bind(this)),console.log("Set up LEGO Connector")}return Object(l.a)(e,[{key:"onDiscover",value:function(e){for(var t in e){t=e[t],this.ble&&t.peripheralId&&(console.log("Discovered LEGO device and will attempt to connect..."),this.ble.connectPeripheral(t.peripheralId));break}}},{key:"_onConnect",value:function(){this.ble?(this.ble.startNotifications(this.serviceUuid,this.characteristicUuid,this.onBleMessage),console.log("Connected to LEGO Device.")):console.log("Something went wrong while connecting")}},{key:"disconnect",value:function(){console.log("disconnect")}},{key:"send",value:function(e){return!!this.ble._connected&&this.ble.write(this.serviceUuid,this.characteristicUuid,I.a.uint8ArrayToBase64(e),"base64",!0)}}]),e}(),b=a(13),C=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"toHex",value:function(e){return e.toString(16)}},{key:"toHexString",value:function(e){return this.toHex(e).padStart(2,"0")}},{key:"objectFlip",value:function(e){var t={};return Object.keys(e).forEach(function(a){t[e[a]]=a}),t}},{key:"sconstructor",value:function(){this.IO.reverseMap=this.objectFlip(this.IO),this.IOEvent.reverseMap=this.objectFlip(this.IOEvent),this.Port.reverseMap=this.objectFlip(this.Port),this.PortFeedback.reverseMap=this.objectFlip(this.PortFeedback),this.LedColor.reverseMap=this.objectFlip(this.LedColor)}}]),e}();C.UUID={SERVICE:"00001623-1212-efde-1623-785feabcd123",CHARACTERISTIC:"00001624-1212-efde-1623-785feabcd123"},C.SystemType={WEDO2:0,DUPLO:1,SYSTEM:2,SYSTEM2:3},C.DeviceNumber={WEDO:0,DUPLO_TRAIN:0,MOVE_HUB:0,SYSTEM2PORT:1,SYSTEM2HANDSET:2},C.DeviceCapabilities={CENTRAL:1,PERIPHERAL:2,LPF2:4,ACT_AS_REMOTE:8},C.IO={MOTOR_WEDO:1,MOTOR_SYSTEM:2,BUTTON:5,LIGHT:8,VOLTAGE:20,CURRENT:21,PIEZO:22,LED:23,TILT_EXTERNAL:34,MOTION_SENSOR:35,COLOR:37,MOTOR_EXTERNAL:38,MOTOR_INTERNAL:39,TILT:40,reverseMap:{}},C.PortFeedback={IN_PROGRESS:1,COMPLETED:2,DISCARDED:4,IDLE:8,BUSY_OR_FULL:16},C.Port={A:0,B:1,C:2,D:3,E:4,F:5},C.Color={NONE:"none",RED:"red",BLUE:"blue",GREEN:"green",YELLOW:"yellow",WHITE:"white",BLACK:"black"},C.ColorIndex=(n={},Object(b.a)(n,C.Color.NONE,255),Object(b.a)(n,C.Color.RED,9),Object(b.a)(n,C.Color.BLUE,3),Object(b.a)(n,C.Color.GREEN,5),Object(b.a)(n,C.Color.YELLOW,7),Object(b.a)(n,C.Color.WHITE,10),Object(b.a)(n,C.Color.BLACK,0),n),C.LedColor={OFF:0,PINK:1,VIOLET:2,BLUE:3,LIGHT_BLUE:4,LIGHT_GREEN:5,GREEN:6,YELLOW:7,ORANGE:8,RED:9,WHITE:10},C.MessageType={HUB_PROPERTIES:1,HUB_ACTIONS:2,HUB_ALERTS:3,HUB_ATTACHED_IO:4,ERROR:5,HW_NETWORK_COMMANDS:8,FW_UPDATE_GO_INTO_BOOTMODE:16,FW_UPDATE_LOCK_MEMORY:17,FW_UPDATE_LOCK_STATUS_REQUEST:18,FW_LOCK_STATUS:19,PORT_INFO_REQUEST:33,PORT_MODE_INFO_REQUEST:34,PORT_INPUT_FORMAT_SETUP_SINGLE:65,PORT_INPUT_FORMAT_SETUP_COMBINED:66,PORT_INFORMATION:67,PORT_MODEINFORMATION:68,PORT_VALUE:69,PORT_VALUE_COMBINED:70,PORT_INPUT_FORMAT:71,PORT_INPUT_FORMAT_COMBINED:72,VIRTUAL_PORT_SETUP:97,OUTPUT:129,PORT_FEEDBACK:130},C.HubProperty={ADVERTISEMENT_NAME:1,BUTTON:2,FW_VERSION:3,HW_VERSION:4,RSSI:5,BATTERY_VOLTAGE:6,BATTERY_TYPE:7,MANUFACTURER_NAME:8,RADIO_FW_VERSION:9,LEGO_WP_VERSION:10,SYSTEM_TYPE_ID:11,HW_NETWORK_ID:12,PRIMARY_MAC:13,SECONDARY_MAC:14,HW_NETWORK_FAMILY:15},C.HubPropertyOperation={SET:1,ENABLE_UPDATES:2,DISABLE_UPDATES:3,RESET:4,REQUEST_UPDATE:5,UPDATE:6},C.HubActionType={SWITCH_OFF:1,DISCONNECT:2,VCC_PORT_ON:3,VCC_PORT_OFF:4,ACTIVATE_BUSY:5,RESET_BUSY:6,SWITCH_OFF_FAST:47,HUB_WILL_SWITCH_OFF:48,HUB_WILL_DISCONNECT:49,HUB_WILL_GO_INTO_BOOTMODE:50},C.HubAlert={LOW_VOLTAGE:1,HIGH_CURRENT:2,LOW_SIGNAL:3,OVER_POWER:4},C.HubAlertOperation={ENABLE_UPDATES:1,DISABLE_UPDATES:2,REQUEST_UPDATES:3,UPDATE:4},C.HubAlertPayload={OK:0,ALERT:255},C.ErrorCodes={ACK:1,NACK:2,BUFFER_OVERFLOW:3,TIMEOUT:4,COMMAND_NOT_RECOGNIZED:5,INVALID_USE:6,OVERCURRENT:7,INTERNAL_ERROR:8},C.HardwareNetworkCommandType={},C.HardwareNetworkFamily={},C.HardwareNetworkSubfamily={},C.ModeInformationType={},C.OutputSubCommand={START_POWER:1,START_POWER_PAIR:2,SET_ACC_TIME:5,SET_DEC_TIME:6,START_SPEED:7,START_SPEED_PAIR:8,START_SPEED_FOR_TIME:9,START_SPEED_FOR_TIME_PAIR:10,START_SPEED_FOR_DEGREES:11,START_SPEED_FOR_DEGREES_PAIR:12,GO_TO_ABS_POSITION:13,GO_TO_ABS_POSITION_PAIR:14,PRESET_ENCODER:20,WRITE_DIRECT_MODE_DATA:81},C.OutputExecution={BUFFER_IF_NECESSARY:0,EXECUTE_IMMEDIATELY:16,NO_ACTION:0,COMMAND_FEEDBACK:1},C.MotorEndState={FLOAT:0,HOLD:126,BRAKE:127},C.MotorProfile={DO_NOT_USE:0,ACCELERATION:1,DECELERATION:2},C.IOEvent={ATTACHED:1,DETACHED:0,ATTACHED_VIRTUAL:2},C.numberToInt32Array=function(e){var t=new ArrayBuffer(4),a=new DataView(t);return a.setInt32(0,e),[a.getInt8(3),a.getInt8(2),a.getInt8(1),a.getInt8(0)]},C.sconstructor();a(280);var D=a(178),M=a.n(D),L=a(89),P=a.n(L),g=a(492),v=a(493),N=a(490),y=a(494),U=a(495),f=a(496),B=a(497),F=function(e){function t(){return Object(c.a)(this,t),Object(T.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="Message";switch(this.props.payload[2]){case C.MessageType.HUB_PROPERTIES:case C.MessageType.HUB_ALERTS:e=o.a.createElement(N.a,null,"Hub");break;case C.MessageType.HUB_ATTACHED_IO:var t=this.props.payload[3],a=this.props.payload[4],n=this.props.payload[5];e=o.a.createElement(N.a,null,o.a.createElement("b",null,C.IO.reverseMap[n]," ",C.IOEvent.reverseMap[a])," on port ",o.a.createElement("b",null,C.Port.reverseMap[t]?C.Port.reverseMap[t]:t));break;case C.MessageType.PORT_INFORMATION:e=o.a.createElement(N.a,null,"Port");break;case C.MessageType.PORT_FEEDBACK:var r=this.props.payload[3],i=this.props.payload[4];e=o.a.createElement(N.a,null,"Command ",o.a.createElement("b",null,i)," on port ",o.a.createElement("b",null,C.Port.reverseMap[r]?C.Port.reverseMap[r]:r));break;case C.MessageType.ERROR:e=o.a.createElement(N.a,null,"Error");break;default:console.log(this.props.payload)}var E=Array.prototype.map.call(this.props.payload,function(e,t){return"0x"+C.toHexString(e)+" "});return o.a.createElement(g.a,{key:P()(),style:{marginBottom:12}},o.a.createElement(v.a,null,o.a.createElement(y.a,{container:!0},o.a.createElement(y.a,{item:!0,xs:12},o.a.createElement(N.a,{variant:"body2",gutterBottom:!0},e)),o.a.createElement(y.a,{item:!0,xs:10},o.a.createElement(N.a,{variant:"caption"},E)),o.a.createElement(y.a,{item:!0,xs:2,alignContent:"flex-end"},o.a.createElement(N.a,{variant:"caption",align:"right",color:"disabled",gutterBottom:!0},M()(this.props.timestamp).format("HH:mm:ss.SSS"))),o.a.createElement(y.a,{item:!0,xs:12},this.props.fromDevice?o.a.createElement(U.a,{color:"primary",fontSize:"small"}):o.a.createElement(f.a,{color:"secondary",fontSize:"small"})," ",o.a.createElement(B.a,{fontSize:"small"})))))}}]),t}(o.a.Component),k=(a(287),a(180)),H=a(498),x=a(504),j=a(505),w=a(499),W=a(119),G=a.n(W),V=a(501),Y=a(500),K=a(502),Q=a(506),X=a(507),z=0,J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(T.a)(this,Object(O.a)(t).call(this,e))).state={ledIndex:0,portMotor:0,ledRgb:{r:0,g:0,b:0},background:"#fff"},a.handleChangeLedIndex=a.handleChangeLedIndex.bind(Object(u.a)(a)),a.handleChangeLedRgb=a.handleChangeLedRgb.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChangeLedIndex",value:function(e){this.setState({ledIndex:e.target.value})}},{key:"handleChangeLedRgb",value:function(e){this.setState({ledRgb:e.rgb,background:e.hex})}},{key:"changeLedByIndex",value:function(e){this.changeLedMode(0);var t=[z,C.MessageType.OUTPUT,50,C.OutputExecution.EXECUTE_IMMEDIATELY^C.OutputExecution.COMMAND_FEEDBACK,C.OutputSubCommand.WRITE_DIRECT_MODE_DATA,0,this.state.ledIndex];t.unshift(t.length),this.props.ioSend(t)}},{key:"changeLedByRgb",value:function(e){this.changeLedMode(1);var t=[z,C.MessageType.OUTPUT,50,C.OutputExecution.EXECUTE_IMMEDIATELY^C.OutputExecution.COMMAND_FEEDBACK,C.OutputSubCommand.WRITE_DIRECT_MODE_DATA,1,this.state.ledRgb.r,this.state.ledRgb.g,this.state.ledRgb.b];t.unshift(t.length),this.props.ioSend(t)}},{key:"changeLedMode",value:function(e){var t=[z,C.MessageType.PORT_INPUT_FORMAT_SETUP_SINGLE,50,e].concat(Object(s.a)(C.numberToInt32Array(1)),[1]);t.unshift(t.length),this.props.ioSend(t)}},{key:"sendMotorCommand",value:function(){}},{key:"render",value:function(){var e=Object.keys(C.LedColor).map(function(e,t){return o.a.createElement(Q.a,{value:t,key:t},"(",t,") ",e)});e.pop();var t=Object.keys(C.Port).map(function(e,t){return o.a.createElement(Q.a,{value:t,key:t},"(",t,") ",e)});return t.pop(),o.a.createElement(H.a,null,o.a.createElement(x.a,{expanded:!0},o.a.createElement(j.a,{expandIcon:o.a.createElement(G.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(N.a,{variant:"h5"},"LED")),o.a.createElement(w.a,null,o.a.createElement(Y.a,null,o.a.createElement(K.a,{onChange:this.handleChangeLedIndex,value:this.state.ledIndex},e),o.a.createElement(V.a,{variant:"contained",color:"secondary",onClick:this.changeLedByIndex.bind(this)},"set LED by index"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(k.SketchPicker,{disableAlpha:!0,presetColors:[],color:this.state.background,onChangeComplete:this.handleChangeLedRgb}),o.a.createElement(V.a,{variant:"contained",color:"secondary",onClick:this.changeLedByRgb.bind(this)},"set LED by RGB")))),o.a.createElement(x.a,{expanded:!0},o.a.createElement(j.a,{expandIcon:o.a.createElement(G.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},o.a.createElement(N.a,{variant:"h5"},"Motor")),o.a.createElement(w.a,null,o.a.createElement(y.a,{container:!0},o.a.createElement(y.a,{item:!0,xs:4},"Port:"),o.a.createElement(y.a,{item:!0,xs:8},o.a.createElement(K.a,{onChange:this.handleChangePort,value:this.state.portMotor},t)),o.a.createElement(y.a,{item:!0,xs:4},"Command type:"),o.a.createElement(y.a,{item:!0,xs:8}),o.a.createElement(y.a,{item:!0,xs:4},"Speed:"),o.a.createElement(y.a,{item:!0,xs:8},o.a.createElement(X.a,{defaultValue:50,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:100})),o.a.createElement(y.a,{item:!0,xs:4},"MaxPower:"),o.a.createElement(y.a,{item:!0,xs:8},o.a.createElement(X.a,{defaultValue:100,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:100,color:"secondary"})),o.a.createElement(y.a,{item:!0,xs:12},o.a.createElement(V.a,{variant:"contained",color:"secondary",onClick:this.sendMotorCommand.bind(this)},"Start motor with speed"))))))}}]),t}(o.a.Component),Z=a(508),$=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(T.a)(this,Object(O.a)(t).call(this))).state={messages:[]},e.onMessage=e.onMessage.bind(Object(u.a)(e)),e.send=e.send.bind(Object(u.a)(e)),e.c=new S(C.UUID.SERVICE,C.UUID.CHARACTERISTIC,e.onMessage),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"send",value:function(e){this.c.send(e)}},{key:"onMessage",value:function(e){var t=I.a.base64ToUint8Array(e);this.setState(function(e){return{messages:[].concat(Object(s.a)(e.messages),[{timestamp:Date.now(),payload:t,fromDevice:!0}])}})}},{key:"onCommand",value:function(e){this.c.send(e),this.setState(function(t){return{messages:[].concat(Object(s.a)(t.messages),[{timestamp:Date.now(),payload:e,fromDevice:!1}])}})}},{key:"render",value:function(){var e=this.state.messages.map(function(e){return o.a.createElement(F,Object.assign({key:P()()},e))}).sort(function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()}).reverse();return o.a.createElement("div",{className:"App"},o.a.createElement(Z.a,null),o.a.createElement("div",{className:"Cards"},o.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Messages"),e,o.a.createElement(F,{timestamp:Date.now(),payload:[8,0,129,50,17,81,0,2],fromDevice:!1}),o.a.createElement(F,{timestamp:Date.now(),payload:[9,0,129,50,17,81,0,2,50,17,81,0,4],fromDevice:!0})),o.a.createElement(J,{ioSend:this.onCommand.bind(this)}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));E.a.render(o.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[185,1,2]]]);
//# sourceMappingURL=main.c175697c.chunk.js.map